# Set shell history
export HISTFILE="$HOME/.zsh_history"
export HISTSIZE=10000
export SAVEHIST=10000
setopt extendedhistory
setopt appendhistory

bindkey '\e[A' history-search-backward
bindkey '\e[B' history-search-forward

# Enable Case Insensitive Tab Completion
autoload -Uz +X compinit && compinit

## case insensitive path-completion
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'
zstyle ':completion:*' menu select


# Initialize Oh My Posh
export OMP_THEME="qlp.toml"
export OMP_THEME_PATH="$HOME/.config/oh-my-posh/${OMP_THEME}"

if [[ -f $OMP_THEME_PATH ]]; then
  if [[ -f "$HOME/.local/bin/oh-my-posh" ]]; then
    eval "$(~/.local/bin/oh-my-posh init zsh --config $=OMP_THEME_PATH)"
  elif [[ -f "/usr/local/bin/oh-my-posh" ]]; then
    eval "$(/usr/local/bin/oh-my-posh init zsh --config $=OMP_THEME_PATH)"
  elif [[ -f "/usr/bin/oh-my-posh" ]]; then
    eval "$(/usr/bin/oh-my-posh init zsh --config $=OMP_THEME_PATH)"
  fi
else
  if [[ -f "$HOME/.local/bin/oh-my-posh" ]]; then
    eval "$(~/.local/bin/oh-my-posh init zsh)"
  elif [[ -f "/usr/local/bin/oh-my-posh" ]]; then
    eval "$(/usr/local/bin/oh-my-posh init zsh)"
  elif [[ -f "/usr/bin/oh-my-posh" ]]; then
    eval "$(/usr/bin/oh-my-posh init zsh)"
  fi
fi

# Source additional zsh config files, if available
if [[ -f "$HOME/.zsh_exports" ]]; then
  source $HOME/.zsh_exports
fi

if [[ -f "$HOME/.zsh_aliases" ]]; then
  source $HOME/.zsh_aliases
fi

# Import $HOME/.zsh_extras, if found
if [[ -f "$HOME/.zsh_extras" ]]; then
  source $HOME/.zsh_extras
fi
